global:
  gc: true
  gcMetrics: false
  waitWhenFinished: false

jobs:
  - name: basic-hook-test
    jobType: create
    jobIterations: 2
    qps: 10
    burst: 10
    namespace: hook-test
    namespacedIterations: true
    verifyObjects: true
    preLoadImages: false
    cleanup: true
    podWait: false
    waitForDeletion: true
    maxWaitTimeout: 2m
    
    hooks:
      - cmd: ["/bin/bash", "../hooks/simple-hook.sh", "beforeJobExecution"]
        when: beforeJobExecution
        background: false
      
      - cmd: ["/bin/bash", "../hooks/simple-hook.sh", "afterJobExecution"]
        when: afterJobExecution
        background: false
      
      - cmd: ["/bin/bash", "../hooks/simple-hook.sh", "onEachIteration"]
        when: onEachIteration
        background: false

      - cmd: ["/bin/bash", "../hooks/simple-hook.sh", "beforeChurn"]
        when: beforeChurn
        background: false
      
      - cmd: ["/bin/bash", "../hooks/simple-hook.sh", "afterChurn"]
        when: afterChurn
        background: false
      
      - cmd: ["/bin/bash", "../hooks/simple-hook.sh", "beforeCleanup"]
        when: beforeCleanup
        background: false
      
      - cmd: ["/bin/bash", "../hooks/simple-hook.sh", "afterCleanup"]
        when: afterCleanup
        background: false
      
      - cmd: ["/bin/bash", "../hooks/simple-hook.sh", "beforeGC"]
        when: beforeGC
        background: false
      
      - cmd: ["/bin/bash", "../hooks/simple-hook.sh", "afterGC"]
        when: afterGC
        background: false
    
    churnConfig:
      duration: 5s
      percent: 33
      delay: 1s
      mode: namespaces
    
    objects:
      - objectTemplate: objectTemplates/hooks-test.yaml
        replicas: 1
        inputVars:
          containerImage: busybox:latest
